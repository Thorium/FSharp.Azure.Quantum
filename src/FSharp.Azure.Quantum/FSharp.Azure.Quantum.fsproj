<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <TargetFramework>net10.0</TargetFramework>
    <GenerateDocumentationFile>true</GenerateDocumentationFile>
    <GenerateProgramFile>false</GenerateProgramFile>

    <!-- Package Metadata -->
    <Version>1.1.0</Version>
    <PackageId>FSharp.Azure.Quantum</PackageId>
    <Title>FSharp.Azure.Quantum</Title>
    <Description>F# library for Azure Quantum with production-ready classical optimization (TSP, Portfolio), Azure Quantum backend integration (IonQ, Rigetti), extensible circuit validation, local quantum simulation, QAOA with automatic parameter optimization (Nelder-Mead), OpenQASM 2.0 support, and error mitigation techniques (ZNE, PEC). Multi-provider architecture supports IonQ, Rigetti, IBM, Amazon Braket, and Google Cirq.</Description>
    <Summary>F# library for Azure Quantum with classical optimization, quantum backends (IonQ, Rigetti), and QAOA with automatic parameter tuning</Summary>
    <PackageReleaseNotes>v1.1.0: QAOA Parameter Optimization Release
- Add automatic QAOA parameter optimization via variational quantum-classical loop
- Implement Nelder-Mead simplex optimizer for problem-specific parameter tuning
- Configurable optimization settings (shots, initial parameters, enable/disable)
- Convergence tracking and optimized parameter reporting
- Backward compatible API via solveWithShots function
- Clean up redundant backend documentation
- All 1,021 tests passing
- Production-ready for quantum TSP solving with research-grade algorithms</PackageReleaseNotes>
    
    <!-- Repository Info -->
    <RepositoryUrl>https://github.com/thorium/FSharp.Azure.Quantum</RepositoryUrl>
    <RepositoryType>git</RepositoryType>
    <PackageProjectUrl>https://github.com/thorium/FSharp.Azure.Quantum</PackageProjectUrl>

    <!-- Author & License -->
    <Authors>Tuomas Hietanen</Authors>
    <PackageTags>F#;FSharp;Quantum;Azure;Computing;Optimization;TSP;Portfolio;QAOA;Circuit</PackageTags>
    <PackageReadmeFile>README.md</PackageReadmeFile>
    <PackageLicenseExpression>Unlicense</PackageLicenseExpression>
    <Copyright>Unlicense - Public Domain</Copyright>
    
    <!-- Symbols -->
    <SymbolPackageFormat>snupkg</SymbolPackageFormat>
    <IncludeSymbols>true</IncludeSymbols>
    <PublishRepositoryUrl>true</PublishRepositoryUrl>

  </PropertyGroup>

  <ItemGroup>
    <!-- Test Visibility: Allow tests to call internal functions -->
    <InternalsVisibleTo Include="FSharp.Azure.Quantum.Tests" />
  </ItemGroup>

  <ItemGroup>
    <None Include="..\..\README.md" Pack="true" PackagePath="\" />
  </ItemGroup>

  <ItemGroup>
    <!-- Core Layer - Foundation Types -->
    <Compile Include="Core\Validation.fs" />
    <Compile Include="Core\Types.fs" />

    <!-- Local Simulator Layer (depends on Types) -->
    <Compile Include="LocalSimulator\StateVector.fs" />
    <Compile Include="LocalSimulator\Gates.fs" />
    <Compile Include="LocalSimulator\QaoaSimulator.fs" />
    <Compile Include="LocalSimulator\Measurement.fs" />

    <!-- Quantum Algorithms (depends on LocalSimulator) -->
    <Compile Include="Algorithms\GroverOracle.fs" />
    <Compile Include="Algorithms\GroverIteration.fs" />
    <Compile Include="Algorithms\GroverSearch.fs" />
    <Compile Include="Algorithms\AmplitudeAmplification.fs" />

    <!-- Core Infrastructure (depends on Types, LocalSimulator) -->
    <Compile Include="Core\CostEstimation.fs" />
    <Compile Include="Core\CircuitValidator.fs" />
    <Compile Include="Core\Authentication.fs" />
    <Compile Include="Core\Retry.fs" />
    <Compile Include="Core\RateLimiting.fs" />
    <Compile Include="Core\Observability.fs" />
    <Compile Include="Core\Batching.fs" />
    <Compile Include="Core\JobLifecycle.fs" />

    <!-- Backends Layer (depends on Core Infrastructure) -->
    <Compile Include="Backends\IonQBackend.fs" />
    <Compile Include="Backends\RigettiBackend.fs" />
    <Compile Include="Core\Client.fs" />

    <!-- Classical Solvers - Pure CPU algorithms, no quantum backend (depends on Types) -->
    <Compile Include="Solvers\Classical\TspTypes.fs" />
    <Compile Include="Solvers\Classical\TspSolver.fs" />
    <Compile Include="Solvers\Classical\PortfolioTypes.fs" />
    <Compile Include="Solvers\Classical\PortfolioSolver.fs" />

    <!-- Builders Layer (depends on Types, LocalSimulator) -->
    <Compile Include="Builders\CircuitBuilder.fs" />
    <Compile Include="Builders\GateTranspiler.fs" />
    <Compile Include="Builders\OpenQasmExport.fs" />
    <Compile Include="Builders\OpenQasmImport.fs" />
    <Compile Include="Builders\QuboEncoding.fs" />
    <Compile Include="Builders\GraphOptimization.fs" />

    <!-- Error Mitigation Layer (depends on Builders) -->
    <Compile Include="ErrorMitigation\ZeroNoiseExtrapolation.fs" />
    <Compile Include="ErrorMitigation\ProbabilisticErrorCancellation.fs" />
    <Compile Include="ErrorMitigation\ReadoutErrorMitigation.fs" />
    <Compile Include="ErrorMitigation\ErrorMitigationStrategy.fs" />

    <!-- QAOA Infrastructure (depends on CircuitBuilder, LocalSimulator) -->
    <Compile Include="Core\QaoaCircuit.fs" />
    <Compile Include="Core\CircuitAbstraction.fs" />
    <Compile Include="Backends\BackendAbstraction.fs" />
    <Compile Include="Core\QaoaOptimizer.fs" />

    <!-- Quantum Solvers (depends on Backends, QAOA) -->
    <Compile Include="Solvers\Quantum\QuantumTspSolver.fs" />
    <Compile Include="Solvers\Quantum\QuantumNetworkFlowSolver.fs" />
    <Compile Include="Solvers\Quantum\QuantumPortfolioSolver.fs" />
    <Compile Include="Solvers\Quantum\QuantumMaxCutSolver.fs" />
    <Compile Include="Solvers\Quantum\QuantumKnapsackSolver.fs" />
    <Compile Include="Solvers\Quantum\QuantumGraphColoringSolver.fs" />
    <Compile Include="Solvers\Quantum\QuantumChemistry.fs" />

    <!-- Hybrid Solvers - Orchestrate classical + quantum (depends on Quantum Solvers) -->
    <Compile Include="Solvers\Hybrid\ProblemAnalysis.fs" />
    <Compile Include="Solvers\Hybrid\QuantumAdvisor.fs" />
    <Compile Include="Solvers\Hybrid\HybridSolver.fs" />

    <!-- Classical Builders - User-facing APIs (depends on HybridSolver) -->
    <Compile Include="Solvers\Classical\TspBuilder.fs" />
    <Compile Include="Solvers\Classical\PortfolioBuilder.fs" />
    <Compile Include="Solvers\Classical\NetworkFlowBuilder.fs" />
    <Compile Include="Solvers\Classical\MaxCutBuilder.fs" />
    <Compile Include="Solvers\Classical\KnapsackBuilder.fs" />
    <Compile Include="Solvers\Classical\GraphColoringBuilder.fs" />

    <!-- Utilities Layer (depends on Classical Builders) -->
    <Compile Include="Utilities\PerformanceBenchmarking.fs" />
    
    <!-- C# Interop Extensions (must come after ALL builders) -->
    <Compile Include="Builders\BuildersCSharpExtensions.fs" />
  </ItemGroup>

  <ItemGroup>
    <PackageReference Include="Azure.Identity" Version="1.13.1" />
    <PackageReference Include="MathNet.Numerics" Version="5.0.0" />
    <PackageReference Include="MathNet.Numerics.FSharp" Version="5.0.0" />
    <PackageReference Include="Microsoft.Extensions.Logging" Version="10.0.0" />
    <PackageReference Include="Serilog" Version="4.3.0" />
    <PackageReference Include="Serilog.Sinks.Console" Version="6.1.1" />
    <PackageReference Include="Serilog.Sinks.File" Version="7.0.0" />
    <PackageReference Include="OpenTelemetry" Version="1.14.0" />
    <PackageReference Include="OpenTelemetry.Exporter.Console" Version="1.14.0" />
    <PackageReference Include="OpenTelemetry.Instrumentation.Http" Version="1.14.0" />
  </ItemGroup>

</Project>
